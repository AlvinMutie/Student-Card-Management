<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Schools | SuperAdmin</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="superadmin.css">
</head>

<body>

    <!-- Sidebar injected by superadmin.js -->

    <main class="sa-main">
        <header class="sa-header">
            <!-- Breadcrumbs injected by superadmin.js -->
        </header>

        <div class="sa-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
                <h1>Registered Schools</h1>
                <div style="display: flex; gap: 12px;">
                    <input type="text" class="sa-input" placeholder="Search schools..."
                        style="margin-bottom: 0; width: 250px;">
                    <button class="sa-btn sa-btn-primary" id="addSchoolBtn">
                        <svg style="width: 18px; height: 18px; fill: white;" viewBox="0 0 24 24">
                            <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
                        </svg>
                        Add School
                    </button>
                </div>
            </div>

            <div class="sa-card" style="padding: 0; overflow: hidden;">
                <div class="sa-table-container">
                    <table class="sa-table">
                        <thead>
                            <tr>
                                <th>School Identity</th>
                                <th>Admin Contact</th>
                                <th>Plan</th>
                                <th>Students</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div style="font-weight: 700;">Maseno School</div>
                                    <small style="color: var(--sa-slate-500);">ID: #1001 • Kisumu, KE</small>
                                </td>
                                <td>
                                    <div>Mr. Andrew O.</div>
                                    <small style="color: var(--sa-slate-500);">admin@maseno.sc.ke</small>
                                </td>
                                <td><span class="sa-badge"
                                        style="background: #e0e7ff; color: #3730a3;">Enterprise</span></td>
                                <td>1,240</td>
                                <td><span class="sa-badge sa-badge-success">Active</span></td>
                                <td>
                                    <button class="sa-btn" style="padding: 6px; color: var(--sa-slate-500);">
                                        <svg style="width: 20px; height: 20px; fill: currentColor;" viewBox="0 0 24 24">
                                            <path
                                                d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" />
                                        </svg>
                                    </button>
                                    <button class="sa-btn" style="padding: 6px; color: var(--sa-danger);">
                                        <svg style="width: 20px; height: 20px; fill: currentColor;" viewBox="0 0 24 24">
                                            <path
                                                d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L16.91,5.68C15.55,4.63 13.85,4 12,4M12,20A8,8 0 0,0 20,12C20,10.15 19.37,8.45 18.32,7.09L7.09,18.32C8.45,19.37 10.15,20 12,20Z" />
                                        </svg>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div style="font-weight: 700;">St. Mary's Yala</div>
                                    <small style="color: var(--sa-slate-500);">ID: #1002 • Siaya, KE</small>
                                </td>
                                <td>
                                    <div>Principal Office</div>
                                    <small style="color: var(--sa-slate-500);">info@stmarys.ac.ke</small>
                                </td>
                                <td><span class="sa-badge" style="background: #f1f5f9; color: #475569;">Standard</span>
                                </td>
                                <td>850</td>
                                <td><span class="sa-badge sa-badge-success">Active</span></td>
                                <td>
                                    <button class="sa-btn" style="padding: 6px; color: var(--sa-slate-500);">
                                        <svg style="width: 20px; height: 20px; fill: currentColor;" viewBox="0 0 24 24">
                                            <path
                                                d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" />
                                        </svg>
                                    </button>
                                    <button class="sa-btn" style="padding: 6px; color: var(--sa-danger);">
                                        <svg style="width: 20px; height: 20px; fill: currentColor;" viewBox="0 0 24 24">
                                            <path
                                                d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L16.91,5.68C15.55,4.63 13.85,4 12,4M12,20A8,8 0 0,0 20,12C20,10.15 19.37,8.45 18.32,7.09L7.09,18.32C8.45,19.37 10.15,20 12,20Z" />
                                        </svg>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div style="font-weight: 700;">Demo Institute</div>
                                    <small style="color: var(--sa-slate-500);">ID: #9999 • Nairobi, KE</small>
                                </td>
                                <td>
                                    <div>System Test</div>
                                    <small style="color: var(--sa-slate-500);">test@demo.com</small>
                                </td>
                                <td><span class="sa-badge" style="background: #fef3c7; color: #b45309;">Trial</span>
                                </td>
                                <td>15</td>
                                <td><span class="sa-badge sa-badge-warning">Suspended</span></td>
                                <td>
                                    <button class="sa-btn" style="padding: 6px; color: var(--sa-slate-500);">
                                        <svg style="width: 20px; height: 20px; fill: currentColor;" viewBox="0 0 24 24">
                                            <path
                                                d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" />
                                        </svg>
                                    </button>
                                    <button class="sa-btn" style="padding: 6px; color: var(--sa-success);">
                                        <svg style="width: 20px; height: 20px; fill: currentColor;" viewBox="0 0 24 24">
                                            <path
                                                d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M10,17L5,12L6.41,10.59L10,14.17L17.59,6.58L19,8L10,17Z" />
                                        </svg>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Add School Modal -->
    <div class="sa-modal-backdrop" id="addSchoolModal" style="display: none;">
        <div class="sa-modal">
            <div class="sa-modal-header">
                <h3>Onboard New School</h3>
                <button type="button" class="sa-btn sa-btn-close" style="background:none; border:none; cursor:pointer;">
                    <svg style="width: 24px; height: 24px;" viewBox="0 0 24 24">
                        <path
                            d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                    </svg>
                </button>
            </div>
            <form id="addSchoolForm">
                <div class="sa-modal-content">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; font-weight: 600; margin-bottom: 8px;">School Name</label>
                            <input type="text" class="sa-input" placeholder="e.g. Nairobi Elite Academy" required>
                        </div>
                        <div>
                            <label style="display: block; font-weight: 600; margin-bottom: 8px;">School Code /
                                ID</label>
                            <input type="text" class="sa-input" placeholder="e.g. 1045" required>
                        </div>
                    </div>

                    <div style="margin-bottom: 16px;">
                        <label style="display: block; font-weight: 600; margin-bottom: 8px;">Primary Admin Email</label>
                        <input type="email" class="sa-input" placeholder="admin@school.com" required>
                        <small style="color: var(--sa-slate-500);">An initialization link will be sent here.</small>
                    </div>

                    <div style="margin-bottom: 16px;">
                        <label style="display: block; font-weight: 600; margin-bottom: 8px;">Subscription Plan</label>
                        <select class="sa-input">
                            <option value="basic">Basic (Up to 200)</option>
                            <option value="standard" selected>Standard (Up to 1000)</option>
                            <option value="enterprise">Enterprise (Unlimited)</option>
                        </select>
                    </div>
                </div>
                <div class="sa-modal-footer">
                    <button type="button" class="sa-btn" id="cancelAddSchool">Cancel</button>
                    <button type="submit" class="sa-btn sa-btn-primary">Provision Tenant</button>
                </div>
            </form>
        </div>
    </div>

    <script src="superadmin.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Modal Logic
            const modal = document.getElementById('addSchoolModal');
            const btn = document.getElementById('addSchoolBtn');
            const closeBtns = document.querySelectorAll('#cancelAddSchool, .sa-btn-close');

            if (btn) {
                btn.addEventListener('click', () => {
                    modal.style.display = 'flex';
                });
            } else {
                console.warn('Add School button not found in DOM');
            }

            closeBtns.forEach(b => {
                b.addEventListener('click', () => {
                    modal.style.display = 'none';
                });
            });

            // Close on backdrop click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });

            // Handle Form Submit
            const form = document.getElementById('addSchoolForm');
            if (form) {
                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const submitBtn = e.target.querySelector('button[type="submit"]');
                    const originalText = submitBtn.innerText;
                    submitBtn.innerText = 'Provisioning...';

                    setTimeout(() => {
                        alert('School provisioned successfully! Start email sent to admin.');
                        modal.style.display = 'none';
                        submitBtn.innerText = originalText;
                        e.target.reset();
                    }, 1500);
                });
            }
        });
    </script>
</body>

</html>