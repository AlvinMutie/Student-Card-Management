<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Secretary Dashboard | Shuleni Advantage</title>
    <meta name="description" content="Visitor management and school administrative dashboard for Shuleni Advantage.">
    <link rel="canonical" href="https://shuleniadvantage.co.ke/admin/secretary_dashboard.html">
    <meta name="robots" content="noindex, nofollow">
    <link rel="icon" href="/favicon.ico" type="image/png">
    <link rel="apple-touch-icon" href="/favicon.ico">
    <meta name="theme-color" content="#064e3b">
    <link rel="stylesheet" href="/shared/portal-theme.css">
    <link rel="stylesheet" href="/admin/secretary-portal.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>

<body data-page="secretaryDashboard">
    <!-- Vertical Sidebar -->
    <div class="sidebar">
        <img src="/assets/hechlink_logo_v4.png" alt="Logo" class="brand-icon" style="filter:none;">
        <h1>Shuleni Advantage</h1>
    </div>
    <ul class="nav-links">
        <li><a href="secretary_dashboard.html" class="active"><i
                    class="fa-solid fa-house"></i><span>Dashboard</span></a>
        </li>
        <li><a href="secretary_visitors.html"><i class="fa-solid fa-users"></i><span>Manage Visitors</span></a></li>
        <li><a href="secretary_settings.html"><i class="fa-solid fa-gear"></i><span>Settings</span></a></li>
    </ul>
    <div class="logout-section">
        <a href="#" class="logout-btn-link" data-logout>
            <i class="fa-solid fa-right-from-bracket"></i>
            <span>Logout</span>
        </a>
    </div>
    </div>

    <!-- Main Content Area -->
    <div class="main-wrapper">
        <header class="top-bar">
            <div class="top-bar-title">
                <h2>Portal Overview</h2>
            </div>
            <div class="top-bar-user">
                Hi, <span id="adminName" data-admin-name>Secretary</span>
            </div>
        </header>

        <main class="content-body">
            <!-- Metrics Grid -->
            <div class="metrics-grid">
                <div class="metric-card total">
                    <div class="metric-info">
                        <h4>Total Logs</h4>
                        <div class="value" id="countTotal">0</div>
                    </div>
                    <div class="metric-icon"><i class="fa-solid fa-clipboard-list"></i></div>
                </div>
                <div class="metric-card pending">
                    <div class="metric-info">
                        <h4>Awaiting Approval</h4>
                        <div class="value" id="countPending">0</div>
                    </div>
                    <div class="metric-icon"><i class="fa-solid fa-clock"></i></div>
                </div>
                <div class="metric-card approved">
                    <div class="metric-info">
                        <h4>Approved Today</h4>
                        <div class="value" id="countApproved">0</div>
                    </div>
                    <div class="metric-icon"><i class="fa-solid fa-user-check"></i></div>
                </div>
            </div>

            <!-- Dashboard Grid -->
            <div class="dashboard-grid">
                <div class="panel">
                    <div class="panel-header">
                        <h3>Pending Actions</h3>
                        <span id="pendingCountBadge"
                            style="background:#f1f5f9; padding:4px 12px; border-radius:20px; font-size:0.8rem; font-weight:700;">0</span>
                    </div>
                    <div class="panel-body" id="pendingList">
                        <div style="text-align:center; padding: 60px; color: #94a3b8;">
                            <i class="fa-solid fa-spinner fa-spin"
                                style="font-size: 2rem; display: block; margin-bottom: 10px;"></i>
                            Loading actions...
                        </div>
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-header">
                        <h3>Visitor Status</h3>
                    </div>
                    <div class="panel-body" style="padding: 20px;">
                        <canvas id="chartVisitorStatus" height="260"></canvas>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="/runtime-config.js"></script>
    <script src="/shared/api-client.js"></script>
    <script src="/admin/secretary-logic.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const userData = JSON.parse(localStorage.getItem('sv_user_data') || '{}');
            if (userData.full_name) {
                document.querySelectorAll('[data-admin-name]').forEach(el => el.textContent = userData.full_name);
            }

            if (typeof loadDashboardData === 'function') {
                loadDashboardData();
            }
        });
    </script>
</body>

</html>
